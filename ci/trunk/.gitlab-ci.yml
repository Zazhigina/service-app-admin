variables:
  FF_GITLAB_REGISTRY_HELPER_IMAGE: 1
  ACTIVE_PROFILE: "trunk"
  APPLICATION_VERSION: "0.1.$CI_PIPELINE_IID"
  APPLICATION_NAME: service-app-admin
  DEPLOY_BRANCH: develop-local
  RELEASE_BRANCH: release-v1
  DEMO_BRANCH: develop-local
  CHART_NAME: tzriu-be-spring
  KUBERNETES_NAMESPACE_OVERWRITE: mirror
  KUBERNETES_NAMESPACE_OVERWRITE_RELEASE: mirror-release
  KUBERNETES_NAMESPACE_OVERWRITE_DEMO: mirror-demo
  IMAGE_REPOSITORY: nexus-registry.inlinegroup-c.ru/tzriu/$APPLICATION_NAME
  ENVIRONMENT_NAME: $ACTIVE_PROFILE

stages:
  - build
  - deploy

include:
  - local: ci/trunk/build.yml
  - local: ci/trunk/deploy.yml
